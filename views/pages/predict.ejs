<html>
  <% include ../partials/head %>
  <head>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript" src="/js/convnet-min.js"></script>
    <script type="text/javascript">
      var predict = {};
      predict.start = function(model){
        var magicNet = new convnetjs.MagicNet();
        magicNet.fromJSON(model);
        // see if we can predict the same model that we trained for 
        var some_test_vol = new convnetjs.Vol([35.646796, 145.710276, 43.5, 0, 1, 12, 14, 30]);
        var predicted_label_soft = magicNet.predict_soft(some_test_vol);
        var predicted_label = magicNet.predict(some_test_vol);   
        
        predict.log("categories: " + JSON.stringify(model.labelCategories));
        predict.log("predicting label " + model.labelCategories[predicted_label]);
        predict.log("actual values " + JSON.stringify(predicted_label_soft.w));
      }
      
      predict.log = function(t){
        $('#content').append(t + "<br>");
      }
      
    </script>
  </head>

  <body>

    <div id="chart_div" style="width:400; height:300"></div>
    <div id="content"></div>
    <script>
  $(document).ready(function(){
    if (typeof <%- model %> !== 'undefined'){
      predict.start(<%- model %>);
    } else {
      log("Unable to start training ... please add some expenses ");
    }
  });
  </script>
  </body>
</html>